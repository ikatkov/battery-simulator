Version 4
SHEET 1 2148 948
WIRE -64 -416 -240 -416
WIRE 144 -416 32 -416
WIRE 224 -416 208 -416
WIRE 336 -416 304 -416
WIRE 384 -416 336 -416
WIRE 704 -416 384 -416
WIRE 768 -416 704 -416
WIRE 384 -400 384 -416
WIRE 704 -400 704 -416
WIRE 704 -320 704 -336
WIRE 768 -320 768 -336
WIRE 768 -320 704 -320
WIRE 768 -304 768 -320
WIRE -16 -272 -16 -352
WIRE -928 -256 -1184 -256
WIRE -800 -256 -848 -256
WIRE -736 -256 -800 -256
WIRE -672 -256 -736 -256
WIRE -592 -256 -672 -256
WIRE -432 -256 -592 -256
WIRE -320 -256 -432 -256
WIRE 336 -240 336 -416
WIRE 608 -240 336 -240
WIRE 896 -240 688 -240
WIRE 1168 -240 960 -240
WIRE -432 -224 -432 -256
WIRE -800 -160 -800 -256
WIRE 336 -160 336 -240
WIRE -672 -144 -672 -256
WIRE -592 -144 -592 -256
WIRE -736 -128 -736 -256
WIRE -736 -128 -768 -128
WIRE -432 -128 -432 -144
WIRE -304 -128 -432 -128
WIRE 1168 -112 1168 -240
WIRE 1168 -112 1072 -112
WIRE -432 -96 -432 -128
WIRE 800 -80 800 -128
WIRE 1072 -48 1072 -112
WIRE -432 16 -432 -16
WIRE -432 16 -544 16
WIRE -304 16 -432 16
WIRE 1072 32 1072 16
WIRE -432 48 -432 16
WIRE 800 48 800 0
WIRE -544 64 -544 16
WIRE 336 144 336 -80
WIRE 432 144 336 144
WIRE 1168 144 1168 -112
WIRE 800 160 800 112
WIRE 800 160 496 160
WIRE 944 160 800 160
WIRE 1072 160 1072 96
WIRE 1072 160 1024 160
WIRE 1120 160 1072 160
WIRE -800 224 -800 -96
WIRE -800 224 -1184 224
WIRE -672 224 -672 -80
WIRE -672 224 -800 224
WIRE -592 224 -592 -80
WIRE -592 224 -672 224
WIRE -544 224 -544 128
WIRE -544 224 -592 224
WIRE -432 224 -432 128
WIRE -432 224 -544 224
WIRE 1504 272 1424 272
WIRE 1616 272 1568 272
WIRE 336 336 336 144
WIRE 336 336 224 336
WIRE 544 336 336 336
WIRE -16 352 -16 -192
WIRE 160 352 -16 352
WIRE 1168 368 1168 240
WIRE 1616 400 1616 272
WIRE 1616 400 1552 400
WIRE 1680 400 1616 400
WIRE 1248 416 1232 416
WIRE 1424 416 1424 272
WIRE 1424 416 1328 416
WIRE 1488 416 1424 416
WIRE -16 464 -16 432
WIRE 336 464 336 336
WIRE 544 464 544 336
WIRE 1168 560 1168 464
WIRE 1408 560 1168 560
WIRE 1680 560 1680 400
WIRE 1680 560 1488 560
WIRE 1168 576 1168 560
WIRE -16 608 -16 528
WIRE 336 624 336 544
WIRE 544 624 544 528
WIRE 544 624 336 624
WIRE 336 640 336 624
WIRE 1168 672 1168 656
FLAG -1056 32 0
FLAG -1056 -48 VCC
IOPIN -1056 -48 Out
FLAG -1184 -256 VCC
IOPIN -1184 -256 In
FLAG -1184 224 0
FLAG -304 -128 V1
IOPIN -304 -128 Out
FLAG -304 16 V2
IOPIN -304 16 Out
FLAG -240 -416 VCC
IOPIN -240 -416 In
FLAG 224 368 V2
IOPIN 224 368 In
FLAG 192 384 0
FLAG 192 320 VCC
IOPIN 192 320 In
FLAG 336 640 0
FLAG 432 176 V1
IOPIN 432 176 In
FLAG 464 192 0
FLAG 464 128 VCC
IOPIN 464 128 In
FLAG 768 -304 0
FLAG -16 608 0
FLAG 1552 432 ref
IOPIN 1552 432 In
FLAG 1520 448 0
FLAG 1520 384 VCC
IOPIN 1520 384 In
FLAG 1808 560 0
FLAG 1808 480 ref
IOPIN 1808 480 In
FLAG 1168 672 0
FLAG 800 -128 VCC
IOPIN 800 -128 In
FLAG -320 -256 2.5V
IOPIN -320 -256 Out
SYMBOL voltage -1056 -64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL cap -688 -144 R0
SYMATTR InstName C3
SYMATTR Value 10µ
SYMBOL cap -608 -144 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res -944 -240 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -416 -128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL res -448 -112 R0
SYMATTR InstName R11
SYMATTR Value 10
SYMBOL res -448 32 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL cap -560 64 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL tl431 -784 -160 M0
WINDOW 0 32 0 Left 2
WINDOW 3 32 64 Left 2
SYMATTR InstName U1
SYMBOL npn -64 -352 R270
SYMATTR InstName Q2
SYMATTR Value 2N3904
SYMBOL OpAmps\\opamp2 192 288 M0
WINDOW 3 -54 142 Left 2
SYMATTR InstName U2
SYMATTR Value LM358_AB
SYMBOL LED -32 464 R0
SYMATTR InstName D1
SYMBOL res 320 448 R0
SYMATTR InstName R13
SYMATTR Value 50k
SYMBOL OpAmps\\opamp2 464 96 R0
WINDOW 3 -59 142 Left 2
SYMATTR InstName U3
SYMATTR Value LM358_AB
SYMBOL res 320 -176 R0
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 784 -96 R0
SYMATTR InstName R15
SYMATTR Value 2k
SYMBOL diode 144 -400 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL LED 784 48 R0
SYMATTR InstName D3
SYMBOL res 928 176 R270
WINDOW 0 43 61 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 1k
SYMBOL voltage 768 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 24
SYMBOL res -32 336 R0
SYMATTR InstName R6
SYMATTR Value 2k
SYMBOL res 0 -176 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 1152 560 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL OpAmps\\opamp2 1520 352 M0
SYMATTR InstName U4
SYMATTR Value LM358_AB
SYMBOL cap 1568 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1n
SYMBOL res 1504 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL voltage 1808 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 2
SYMBOL res 1344 400 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL res 208 -400 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 200
SYMBOL res 592 -224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R2
SYMATTR Value 0.1m
SYMBOL tip142 1232 368 M0
WINDOW 0 56 32 Left 2
WINDOW 3 56 68 Left 2
SYMATTR InstName U5
SYMBOL pmos 1120 240 M180
SYMATTR InstName M2
SYMATTR Value NDP6020P
SYMATTR Prefix X
SYMBOL zener 1056 -48 R0
WINDOW 3 -153 -8 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84B6V8LY
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 720 -336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL zener 1088 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value BZX84B6V8LY
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL diode 896 -224 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMBOL cap 528 464 R0
SYMATTR InstName C5
SYMATTR Value 1µ
TEXT -800 368 Left 2 !.tran 0 1 10m
TEXT -808 416 Left 2 !.inc LM358_AB.sub
TEXT -808 448 Left 2 !.inc TL431.lib
TEXT 1184 136 Left 2 ;Source
TEXT -136 -344 Left 2 ;max discharge 100mA
TEXT -176 488 Left 2 ;DISCHARGE
TEXT 1240 624 Left 2 ;3.5W
TEXT 408 520 Left 2 ;50k pot
TEXT 1240 472 Left 2 ;10k for SD*
TEXT -144 -376 Left 2 ;0.27W
TEXT 1688 608 Left 2 ;sets max charge current\n1V = 1A
TEXT 856 -376 Left 2 ;Charger
TEXT 232 -504 Left 2 ;2W
TEXT -1176 288 Left 2 ;Vin must be same or higher\nthan charger voltage
TEXT -808 480 Left 2 !.inc NDP6020P.lib
TEXT 456 -440 Left 2 ;2.5A PTC
TEXT -904 -328 Left 2 ;1W
TEXT 856 -336 Left 2 ;max voltage is \ntermally limited by M2
TEXT -1160 72 Left 2 ;min voltage 12V\nmax voltage 30V\nsets battery max voltage
TEXT 552 -360 Left 2 ;3A schottky
TEXT 912 -184 Left 2 ;3A
